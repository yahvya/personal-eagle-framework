\hypertarget{a00167_source}{}\doxysection{Mysql\+Provider.\+php}
\label{a00167_source}\index{MysqlProvider.php@{MysqlProvider.php}}
\mbox{\hyperlink{a00167}{Aller à la documentation de ce fichier.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{a00167_source_l00001}00001\ <?php}
\DoxyCodeLine{\Hypertarget{a00167_source_l00002}00002\ }
\DoxyCodeLine{\Hypertarget{a00167_source_l00003}\mbox{\hyperlink{a00411}{00003}}\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{a00411}{SaboCore\(\backslash\)Database\(\backslash\)Default\(\backslash\)Provider}};}
\DoxyCodeLine{\Hypertarget{a00167_source_l00004}00004\ }
\DoxyCodeLine{\Hypertarget{a00167_source_l00005}00005\ use\ Override;}
\DoxyCodeLine{\Hypertarget{a00167_source_l00006}00006\ use\ PDO;}
\DoxyCodeLine{\Hypertarget{a00167_source_l00007}00007\ use\ \mbox{\hyperlink{a00580}{SaboCore\(\backslash\)Config\(\backslash\)Config}};}
\DoxyCodeLine{\Hypertarget{a00167_source_l00008}00008\ use\ \mbox{\hyperlink{a00584}{SaboCore\(\backslash\)Config\(\backslash\)ConfigException}};}
\DoxyCodeLine{\Hypertarget{a00167_source_l00009}00009\ use\ \mbox{\hyperlink{a00760}{SaboCore\(\backslash\)Database\(\backslash\)Providers\(\backslash\)DatabaseProvider}};}
\DoxyCodeLine{\Hypertarget{a00167_source_l00010}00010\ use\ Throwable;}
\DoxyCodeLine{\Hypertarget{a00167_source_l00011}00011\ }
\DoxyCodeLine{\Hypertarget{a00167_source_l00016}\mbox{\hyperlink{a00720}{00016}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{a00720}{MysqlProvider}}\ \textcolor{keyword}{extends}\ \mbox{\hyperlink{a00760}{DatabaseProvider}}\{}
\DoxyCodeLine{\Hypertarget{a00167_source_l00020}\mbox{\hyperlink{a00720_a75035f29fe39a18f2c2279bc64661e17}{00020}}\ \ \ \ \ \textcolor{keyword}{protected}\ \textcolor{keyword}{static}\ ?PDO\ \mbox{\hyperlink{a00720_a75035f29fe39a18f2c2279bc64661e17}{\$con}};}
\DoxyCodeLine{\Hypertarget{a00167_source_l00021}00021\ }
\DoxyCodeLine{\Hypertarget{a00167_source_l00022}00022\ \textcolor{preprocessor}{\ \ \ \ \#[Override]}}
\DoxyCodeLine{\Hypertarget{a00167_source_l00023}\mbox{\hyperlink{a00720_a13bf8f7c5746da746a88b0c71bab49dc}{00023}}\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{function}\ \mbox{\hyperlink{a00720_a13bf8f7c5746da746a88b0c71bab49dc}{initDatabase}}(\mbox{\hyperlink{a00580}{Config}}\ \$providerConfig):void\{}
\DoxyCodeLine{\Hypertarget{a00167_source_l00024}00024\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ vérification\ de\ la\ configuration\ mysql}}
\DoxyCodeLine{\Hypertarget{a00167_source_l00025}00025\ \ \ \ \ \ \ \ \ \$providerConfig-\/>checkConfigs(\textcolor{stringliteral}{"{}host"{}},\textcolor{stringliteral}{"{}user"{}},\textcolor{stringliteral}{"{}password"{}},\textcolor{stringliteral}{"{}dbname"{}});}
\DoxyCodeLine{\Hypertarget{a00167_source_l00026}00026\ }
\DoxyCodeLine{\Hypertarget{a00167_source_l00027}00027\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}\{}
\DoxyCodeLine{\Hypertarget{a00167_source_l00028}00028\ \ \ \ \ \ \ \ \ \ \ \ \ self::\$con\ =\ \textcolor{keyword}{new}\ PDO(}
\DoxyCodeLine{\Hypertarget{a00167_source_l00029}00029\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dsn:\ \textcolor{stringliteral}{"{}mysql:host=\{\$providerConfig-\/>getConfig(name:\ "{}}host\textcolor{stringliteral}{"{})\};dbname=\{\$providerConfig-\/>getConfig(name:\ "{}}dbname\textcolor{stringliteral}{"{})\}"{}},}
\DoxyCodeLine{\Hypertarget{a00167_source_l00030}00030\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ username:\ \$providerConfig-\/>\mbox{\hyperlink{a00580_a2caf4e7c6895e4ec724255f4730a1e06}{getConfig}}(name:\ \textcolor{stringliteral}{"{}user"{}}),}
\DoxyCodeLine{\Hypertarget{a00167_source_l00031}00031\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ password:\ \$providerConfig-\/>\mbox{\hyperlink{a00580_a2caf4e7c6895e4ec724255f4730a1e06}{getConfig}}(name:\ \textcolor{stringliteral}{"{}password"{}}),}
\DoxyCodeLine{\Hypertarget{a00167_source_l00032}00032\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ options:\ [}
\DoxyCodeLine{\Hypertarget{a00167_source_l00033}00033\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ PDO::MYSQL\_ATTR\_INIT\_COMMAND\ =>\ \textcolor{stringliteral}{"{}SET\ NAMES\ utf8"{}},}
\DoxyCodeLine{\Hypertarget{a00167_source_l00034}00034\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ PDO::ATTR\_ERRMODE\ =>\ PDO::ERRMODE\_EXCEPTION,}
\DoxyCodeLine{\Hypertarget{a00167_source_l00035}00035\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ PDO::ATTR\_DEFAULT\_FETCH\_MODE\ =>\ PDO::FETCH\_ASSOC}
\DoxyCodeLine{\Hypertarget{a00167_source_l00036}00036\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ]}
\DoxyCodeLine{\Hypertarget{a00167_source_l00037}00037\ \ \ \ \ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{\Hypertarget{a00167_source_l00038}00038\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{a00167_source_l00039}00039\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{catch}(Throwable)\{}
\DoxyCodeLine{\Hypertarget{a00167_source_l00040}00040\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ \textcolor{keyword}{new}\ \mbox{\hyperlink{a00584}{ConfigException}}(message:\ \textcolor{stringliteral}{"{}Echec\ de\ connexion\ à\ la\ base\ de\ donnée"{}});}
\DoxyCodeLine{\Hypertarget{a00167_source_l00041}00041\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{a00167_source_l00042}00042\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{a00167_source_l00043}00043\ }
\DoxyCodeLine{\Hypertarget{a00167_source_l00047}00047\ \textcolor{preprocessor}{\ \ \ \ \#[Override]}}
\DoxyCodeLine{\Hypertarget{a00167_source_l00048}\mbox{\hyperlink{a00720_a69d47b951343847eb872495590d43109}{00048}}\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{function}\ \mbox{\hyperlink{a00720_a69d47b951343847eb872495590d43109}{getCon}}():?PDO\{}
\DoxyCodeLine{\Hypertarget{a00167_source_l00049}00049\ \ \ \ \ \ \ \ \ return\ self::\$con;}
\DoxyCodeLine{\Hypertarget{a00167_source_l00050}00050\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{a00167_source_l00051}00051\ \}}

\end{DoxyCode}
